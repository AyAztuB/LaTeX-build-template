\documentclass[12pt,a4paper]{article}

\usepackage{amssymb, amsthm, mathtools, amsmath}
\newtheorem{definition}{Definition}
\theoremstyle{definition}

\usepackage{algorithm}
\usepackage{algpseudocode}

% \usepackage[english,french]{babel}
\usepackage{appendix}
\usepackage[most]{tcolorbox}
\usepackage{xparse}
\usepackage{scalerel}
\usepackage{float}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[top=2.5cm, bottom=2.4cm, left=2.5cm, right=2.5cm]{geometry}
\usepackage{graphics}
\usepackage{multicol}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{tikzlings}
\usepackage{url}
\usepackage{hyperref}
\usepackage{pgfkeys}
\usepackage{indentfirst}
\usepackage[acronym]{glossaries}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}

\usepackage{todonotes}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{myStyle}{
    backgroundcolor=\color{backcolour},
    rulecolor=\color{black},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single,
}

% \lstset{style=myStyle}

\tcbuselibrary{skins, listings, xparse}
% \newtcolorbox{mybox}[2][]{colback=red!5!white,colframe=red!75!black,title={#1},#1}
\newtcolorbox[auto counter,number within=section]{pabox}[2][]{
	colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,
	title=Examp.~\thetcbcounter: #2,#1}
\NewTColorBox[use counter from=pabox]{mybox}{ O{red} m d"" !O{} }
	{enhanced,colframe=#1!75!black,colback=#1!5!white,
	 fonttitle=\bfseries,title={\thetcbcounter~#2},
	 IfValueT={#3}{watermark text={#3}},#4}
\NewTotalTCBox{\commandbox}{ s O{>} v }
	{verbatim,colupper=white,colback=black!75!white,colframe=black}
	{\IfBooleanT{#1}{\textcolor{red}{\ttfamily\bfseries #2 }}
		\lstinline[language=command.com,keywordstyle=\color{blue!35!white}\bfseries]^#3^}
% \newtcblisting{commandshell}{
% 	colback=black,colupper=white,colframe=yellow!75!black,
% 	listing only,listing options={style=tcblatex,language=sh},
% 	every listing line={\textcolor{red}{\small\ttfamily\bfseries root \$> }}}

\NewTCBListing{commandshell}{ O{user \$} }{
	colback=black,colupper=white,colframe=yellow!75!black,
	listing engine=listings, listing only,
	listing options={style=tcblatex,language=sh},
	every listing line={\textcolor{red}{\small\ttfamily\bfseries #1 }}}

\newtcblisting{ubuntu}{
	colback=violet!50!black,
	colupper=white,colframe=gray!65!black,listing only,
	listing engine=listings,
	listing options={style=tcblatex,language=sh,escapeinside=``,},
	title={\textcolor{orange}{\Huge{$\bullet$}}{\textcolor{gray}{\Huge{$\bullet\bullet$}}}},
	every listing line={\MyUbuntuPrompt},enhanced,
	overlay={
		\begin{tcbinvclipframe}
			\penguin[shift={([xshift=2cm,yshift=-0.8cm]frame.north)}]
		\end{tcbinvclipframe}}
}

\pgfkeys{/ubuntu/.cd,
	user/.code={\gdef\MyUbuntuUser{#1}},user={},
	host/.code={\gdef\MyUbuntuHost{#1}},host={},
	color/.code={\gdef\MyUbuntuColor{#1}},color=white,
	prompt char/.code={\gdef\MyUbuntuPromptChar{#1}},prompt char=\#,
	path/.code={\gdef\MyUbuntuPath{#1}},path=\~{},
	root/.style={user=root,host=ubuntu,color=lime,prompt char=\#,path=/},
	bob/.style={user=bob,host=remotehost,color=cyan,path=\~{}},
	cat/.style={user={schroedingers\char`_cat},host=burrow,color=magenta,prompt char=\$,path=\~{}}
}

\newcommand{\SU}[1]{\pgfkeys{/ubuntu/.cd,#1}%
	\gdef\MyUbuntuPrompt{
		\textcolor{\MyUbuntuColor}
			{\small\ttfamily\bfseries \MyUbuntuUser@{\MyUbuntuHost}{\textcolor{white}:}\textcolor{cyan!60}{\MyUbuntuPath}{\textcolor{white}\MyUbuntuPromptChar} }}}
\newcommand{\StartConsole}{\gdef\MyUbuntuPrompt{}}


% \makeatother
\edef\restoreparindent{\parindent=\the\parindent\relax}
\usepackage{parskip}
\restoreparindent

\lhead{}
\rhead{}
\chead{\nouppercase\leftmark}
\lfoot{AyAztuB}
\rfoot{\thepage}
\cfoot{}

%\renewcommand{\footrulewidth}{0.7pt}
\renewcommand{\headrulewidth}{0.7pt}

% To set up a second ToC (ToC for Appendix = toca)
\makeatletter
    \newcommand\tableofcontentsA{%
        \section*{Table des annexes%\contentsname
            \@mkboth{%
               \MakeUppercase\contentsname}{\MakeUppercase\contentsname}}%
        \@starttoc{toca}%
        }

\makeglossaries
\input{glossary}

\begin{document}
\begin{titlepage}
	\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
	\center
	\textsc{\LARGE
	} \\[1cm]
	\HRule \\[0.4cm]
	{ \huge \bfseries How to compile LaTeX using GNU/Make\\[0.15cm] }
	\HRule \\[1.5cm]
	\textsc{AyAztuB}\\[0.5cm]
	Demo \LaTeX Build Template\\[0.5cm]
	\today
	\\[1.5cm]

	% \begin{abstract}
	% \end{abstract}
\end{titlepage}

\tableofcontents
\newpage

\includegraphics[width=0.9\linewidth]{img.png}

\newpage

\section{Explaination}

The build process uses some secondary expension \cite{GNUMake} in order to retrive the dependencies of the current paper target.

blablabla let's use a random acronym of \acrshort{acronym_http} here...

If you want more infos, go check the \texttt{latex.mak} file directly: this file is just a demo...

\newpage

\section{test}

BTW, I also want my \acrshort{acronym_http} acronym to be printed here.
Let me introduce you to the \gls{def_streaming} practice...

\begin{mybox}{My title}
  This is a tcolorbox.
\end{mybox}
 
\begin{mybox}[blue]{My title}
  This is a tcolorbox.
\end{mybox}
 
\begin{mybox}[green]{My title}"My Watermark"
  This is a tcolorbox.
\end{mybox}
 
\begin{mybox}[yellow]{My title}[colbacktitle=yellow!50!white,coltitle=black]
  This is a tcolorbox.
\end{mybox}
 
\begin{mybox}[purple]{My title}"All together"[coltitle=yellow]
  This is a tcolorbox.
\end{mybox}

\commandbox*{cd "My Documents"} changes to directory \commandbox{My Documents}.

\commandbox*{dir /A} lists the directory content.

\commandbox*{copy example.txt d:\target} copies \commandbox{example.txt} to \commandbox{d:\target}.

\commandbox*[\$]{cd /toto}

\commandbox*[\#]{echo RIP}

\begin{commandshell}
ls -la
cd /toto
\end{commandshell}

\begin{commandshell}[root \#]
ls -la
cd /toto
\end{commandshell}

\SU{root}
\begin{ubuntu}
whoami `\StartConsole`
root `\SU{root}` 
id `\StartConsole` 
uid=0(root) gid=0(root) groups=0(root)`\SU{root}`
hostname `\StartConsole`
ubuntu`\SU{root}`
ssh cat@burrow`\StartConsole`
bob@remotehost's`\ `password:
Linux remotehost 2.6.32-5-686 #1 SMP Sun Sep 23 09:49:36 UTC 2012 i686
You have mail.
Last login: Wed Oct 16 01:12:35 2012 from localhost
`\SU{cat}`
whoami`\StartConsole`
schroedingers_cat`\SU{cat}`
cd / `\SU{cat, path=/}`
_
\end{ubuntu}

\newpage

\phantomsection
\bibliographystyle{plain}
\bibliography{refs}
\phantomsection
\printglossary[type=\acronymtype]
\printglossary
\newpage

\pagenumbering{Roman}

% Auto add any future elements in toca instead of toc (replace add to ToC with add to ToC Appendix)
\let\oldaddtocontents\addtocontents
\def\addtocontents#1{%
   \def\tmpa{#1}%
   \def\tmpb{toc}%
   \ifx\tmpa\tmpb
      \def\tmpa{toca}%
   \fi
   \expandafter\oldaddtocontents\expandafter{\tmpa}}
\tableofcontentsA
\newpage
\appendix

\section{first}

Use \commandbox*{make} to compile.

\end{document}

